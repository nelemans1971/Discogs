USE <%DATABASE%>;


DELIMITER $$

DROP PROCEDURE IF EXISTS SETTING_IU$$

CREATE PROCEDURE SETTING_IU (
    IN parNAME     VARCHAR(40),
    IN parVALUE    VARCHAR(255)
)
BEGIN
--
--
--
  IF (SELECT COUNT(*) FROM SETTING WHERE `NAME` = parNAME) = 0 THEN

    INSERT INTO SETTING (
               `NAME`,
               `VALUE`)
    VALUES(parNAME,
           parVALUE);
  ELSE

    UPDATE SETTING
      SET `VALUE` = parVALUE
    WHERE `NAME` = parNAME;

  END IF;

END$$

DELIMITER ;


DELIMITER $$

DROP PROCEDURE IF EXISTS SETTING_D$$

CREATE PROCEDURE SETTING_D (
    IN parNAME    VARCHAR(40)
)
BEGIN
--
--
--
  DELETE FROM SETTING
  WHERE `NAME` = parNAME;

END$$

DELIMITER ;


DELIMITER $$

DROP PROCEDURE IF EXISTS SETTING_S$$

CREATE PROCEDURE SETTING_S (
    IN parNAME    VARCHAR(40)
)
BEGIN
--
-- EG: CALL SETTING_S ('D22222');
--
  IF (SELECT COUNT(*) FROM SETTING WHERE NAME = parNAME) = 0 THEN

    SELECT parNAME AS `NAME`,
           '' AS `VALUE`;

  ELSE

    SELECT `NAME`,
           `VALUE`
    FROM   SETTING
    WHERE  `NAME` = parNAME;

  END IF;

END$$

DELIMITER ;
